## ä¸€ã€ä½¿ç”¨è¯´æ˜

inDB.distæ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¥å£æ–‡ä»¶ä¸ºinDB.exe

### å…¥åº“ç¤ºä¾‹

```python
cd "D:\code\satellite-analysis\inDB\inDB.dist"

inDB.exe --db_config "D:\code\satellite-analysis\inDB\json\dbConfig.json" --product_config "D:\code\satellite-analysis\inDB\json\productLC08Config.json" "D:\code\satellite-analysis\inDB\json\productLC09Config.json" --output_log "D:\code\satellite-analysis\inDB\json\log.txt" --scenes_dir "E:\Data\0708"
```

### å‚æ•°è¯´æ˜

#### --db_config

dbConfig.jsonç»å¯¹è·¯å¾„ï¼Œä¸€èˆ¬æ— éœ€å˜åŒ–ï¼Œå­˜åœ¨åŒ—äº¬å†…ç½‘æœºå™¨å…±äº«ç£ç›˜ä¸­

#### --scenes_dir

å¾…å…¥åº“æ™¯åˆ—è¡¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ `J49`

#### --product_config

productConfig.jsonï¼Œåé¢è·Ÿ`N`ä¸ªè·¯å¾„å°±å…¥`N`ä¸ªäº§å“ï¼Œä¾‹å¦‚ï¼š

```python
--product_config "äº§å“1çš„jsonè·¯å¾„" "äº§å“2çš„jsonè·¯å¾„" "ä»¥æ­¤ç±»æ¨..."
```

productConfig.jsonæ ‡å‡†å¦‚ä¸‹ï¼š

```python
{
	"IS_SINGLE": True,
Â  Â  "SCENE_PREFIX": "GF1",
Â  Â  "IS_SINGLE": false, // é»˜è®¤ä¸ºtrue
Â  Â  "TEMP_OUTPUT_DIR": "Z:\\NNU_OpenGMS\\temp",
Â  Â  "CUR_SENSOR_NAME": "GF-1_PMS",
Â  Â  "CUR_PRODUCT_NAME": "GF-1_ARD",
Â  Â  "CUR_RESOLUTION": "2m",
Â  Â  "CUR_PERIOD": "16d",
Â  Â  "TAGS": {
Â  Â  Â  Â  "source": "national",
Â  Â  Â  Â  "production": "light",
Â  Â  Â  Â  "category": "ard"
Â  Â  }
}
```

##### IS_SINGLE

å¯é€‰é”®å€¼å¯¹ï¼Œæ²¡æœ‰é»˜è®¤ä¸ºTrueï¼Œå³é»˜è®¤å•æ³¢æ®µå…¥åº“
##### SCENE_PREFIX

å¾…å…¥åº“æ™¯æ–‡ä»¶å¤¹åå­—å¼€å¤´çš„ç»Ÿä¸€å‰ç¼€ï¼Œä»¥æ­¤åŒºåˆ†äº§å“
##### TEMP_OUTPUT_DIR

ä¸€èˆ¬æ— éœ€ä¿®æ”¹ï¼Œä¿è¯å…¥åº“æœºå™¨èŠ‚ç‚¹å¯è®¿é—®ç›¸åº”ç£ç›˜ï¼Œä¸”ç£ç›˜ç©ºé—´å¤§å°è¶³å¤Ÿå¤§å³å¯
##### CUR_SENSOR_NAME

==CUR_SENSOR_NAME== é‡‡ç”¨ä»¥ä¸‹è¡¨æ ¼ä¸­å·²æœ‰çš„ `sensor_name` ä¸€åˆ—ï¼Œåœ¨æ­¤å‡è®¾å…¥åº“é«˜åˆ†ä¸€å·æ•°æ®ï¼Œæ•…è®¾`CUR_SENSOR_NAME`ä¸º`GF-1_PMS`.
![](https://assignmanage.oss-cn-nanjing.aliyuncs.com/5c1dc7af5fb7c68b68bd37fc9b5e5be.jpg)

##### CUR_PRODUCT_NAME

==CUR_PRODUCT_NAME== åŒæ ·åœ°ï¼Œé‡‡ç”¨ä¸‹å›¾ä¸­å·²æœ‰çš„ `product_name` ä¸€åˆ—ã€‚è®¾å®šå‰ï¼Œè¯·æŸ¥çœ‹ä¸‹è¡¨ä¸­æ˜¯å¦æœ‰å·²ç»è®¾å®šçš„ç›¸å…³äº§å“åç§°ï¼›

æŸ¥çœ‹æ–¹å¼ï¼šæ ¹æ®å·²ç»è®¾å®šçš„`CUR_SENSOR_NAME`ï¼Œä¾‹å¦‚`GF-1_PMS`ï¼Œå…¶`sensor_id`åœ¨ä¸Šå›¾ä¸­æŸ¥æ‰¾ï¼Œå‘ç°`sensor_id`ä¸º`SE1240b`ï¼Œåœ¨ä¸‹å›¾ä¸­æŸ¥æ‰¾`sensor_id`ä¸º`SE1240b`çš„`product_name`ï¼Œå‘ç°æœ‰`GF-1_ARD`å’Œ`Level_1A`. å‡è®¾ç°åœ¨å…¥åº“GF-1çš„ARDæ•°æ®ï¼Œå³å¯å°†`CUR_SENSOR_NAME`è®¾ä¸º`GF-1_ARD`.

![](https://assignmanage.oss-cn-nanjing.aliyuncs.com/d4eb3ec12b745116ef5881464f0de30.jpg)

##### CUR_RESOLUTION

è®¾å®š==CUR_RESOLUTION==ä¸ºå®é™…åˆ†è¾¨ç‡ï¼Œé«˜åˆ†ä¸€å·åˆ™ä¸º`2m`

##### CUR_PERIOD

è®¾å®š``CUR_PERIOD``ä¸ºå®é™…å‘¨æœŸå¤©æ•°

##### TAGS

è®¾å®š==TAGS==ï¼š
```json
"TAGS": {
	"source": "national" | "international", # å›½å†…æˆ–å›½å¤–
	"production": "light" | "radar",        # å…‰å­¦æˆ–é›·è¾¾
	"category": "ard" | "normal"            # ARDæˆ–æ™®é€š
}
```

#### --output_log

è¾“å‡ºlog.txtçš„ç»å¯¹è·¯å¾„ï¼Œæ³¨æ„==ä¸è¦ä¸å†å²logå†²çª==ï¼Œé™¤éæ‚¨ç¡®å®šæ¸…é™¤å†å²log.txt

## äºŒã€è¾“å‡ºLOGè¯´æ˜

### log.txt æ ·ä¾‹è¾“å‡º

```cmd
========== [Landsat8_OLI] ==========
[Scene 1] E:\Data\0708\LC08_L2SP_121035_20250413_20250416_02_T1\LC08_L2SP_121035_20250413_20250416_02_T1.tiff
[FAILED] Scene 1, E:\Data\0708\LC08_L2SP_121035_20250413_20250416_02_T1\LC08_L2SP_121035_20250413_20250416_02_T1.tiff
[ERROR] insert_to_db() failed
[WARNING] Data may have been partially written, please check manually.
[Scene 2] E:\Data\0708\LC08_L2SP_122034_20250420_20250425_02_T1\LC08_L2SP_122034_20250420_20250425_02_T1.tiff
[FAILED] Scene 2, E:\Data\0708\LC08_L2SP_122034_20250420_20250425_02_T1\LC08_L2SP_122034_20250420_20250425_02_T1.tiff
[ERROR] insert_to_db() failed
[WARNING] Data may have been partially written, please check manually.
[Scene 3] E:\Data\0708\LC08_L2SP_122035_20250420_20250425_02_T1\LC08_L2SP_122035_20250420_20250425_02_T1.tiff
[FAILED] Scene 3, E:\Data\0708\LC08_L2SP_122035_20250420_20250425_02_T1\LC08_L2SP_122035_20250420_20250425_02_T1.tiff
[ERROR] insert_to_db() failed
[WARNING] Data may have been partially written, please check manually.
========== Batch Insert End for this product ==========

========== [Landsat9_OLI] ==========
[Scene 1] E:\Data\0708\LC09_L2SP_122034_20250412_20250413_02_T1\LC09_L2SP_122034_20250412_20250413_02_T1.tiff
[FAILED] Scene 1, E:\Data\0708\LC09_L2SP_122034_20250412_20250413_02_T1\LC09_L2SP_122034_20250412_20250413_02_T1.tiff
[ERROR] insert_to_db() failed
[WARNING] Data may have been partially written, please check manually.
[Scene 2] E:\Data\0708\LC09_L2SP_123034_20250419_20250420_02_T1\LC09_L2SP_123034_20250419_20250420_02_T1.tiff
[SUCCESS] Scene 2, E:\Data\0708\LC09_L2SP_123034_20250419_20250420_02_T1\LC09_L2SP_123034_20250419_20250420_02_T1.tiff
========== Batch Insert End for this product ==========
```

### è¾“å‡ºè¯´æ˜

å…¥åº“æˆåŠŸï¼š

```cmd
[Scene 2] E:\Data\0708\LC09_L2SP_123034_20250419_20250420_02_T1\LC09_L2SP_123034_20250419_20250420_02_T1.tiff
[SUCCESS] Scene 2, E:\Data\0708\LC09_L2SP_123034_20250419_20250420_02_T1\LC09_L2SP_123034_20250419_20250420_02_T1.tiff
```

å…¥åº“å¤±è´¥ï¼š

```
[FAILED]
æˆ–
[NOTSTARTED]
```

## ä¸‰ã€åº”ç”¨åœºæ™¯

ä»…åº”ç”¨äºä»¥ä¸‹æƒ…å†µï¼š

- XML ç¡®ä¿è§„èŒƒ
- å¤šæ³¢æ®µæ–‡ä»¶ç»„ç»‡è§„èŒƒï¼š
	-- ğŸ“æ™¯åˆ—è¡¨æ‰€åœ¨ç›®å½•ï¼š
		-- ğŸ“GF1_PMS_E116.4_N35.8_20250426_L1A1228686752
			-- GF1_PMS_E116.4_N35.8_20250426_L1A1228686752.tif
			-- GF1_PMS_E116.4_N35.8_20250426_L1A1228686752_cloud.tif (äº‘æ©è†œæ³¢æ®µåŒ…å«==cloud==å­—æ ·)
			-- Metadata.xml (åŒä¸€æ–‡ä»¶å¤¹ä¸è¦å‡ºç°å¤šä¸ªXMLæ–‡ä»¶ï¼Œç¨‹åºåªè¯†åˆ«ç¬¬ä¸€ä¸ª==XML==æ–‡ä»¶ï¼Œä¼˜å…ˆé‡‡ç”¨å¸¦æœ‰==Metadata==å­—æ ·çš„)
		-- ğŸ“GF1_PMS_E115.4_N35.8_20250426_L1A1228686752
			-- GF1_PMS_E115.4_N35.8_20250426_L1A1228686752.tif
			-- GF1_PMS_E115.4_N35.8_20250426_L1A1228686752_cloud.tif
			-- Metadata.xml
		...
- å•æ³¢æ®µæ–‡ä»¶ç»„ç»‡è§„èŒƒï¼š
	-- ğŸ“æ™¯åˆ—è¡¨æ‰€åœ¨ç›®å½•ï¼š
		-- ğŸ“GF1_PMS_E116.4_N35.8_20250426_L1A1228686752
		    -- ğŸ“Bands
		     -- GF1_PMS_E116.4_N35.8_20250426_L1A1228686752_B1.tif
		     -- GF1_PMS_E116.4_N35.8_20250426_L1A1228686752_B2.tif
		     -- ...
			-- GF1_PMS_E116.4_N35.8_20250426_L1A1228686752_cloud.tif (äº‘æ©è†œæ³¢æ®µåŒ…å«==cloud==å­—æ ·)
			-- Metadata.xml (åŒä¸€æ–‡ä»¶å¤¹ä¸è¦å‡ºç°å¤šä¸ªXMLæ–‡ä»¶ï¼Œç¨‹åºåªè¯†åˆ«ç¬¬ä¸€ä¸ª==XML==æ–‡ä»¶ï¼Œä¼˜å…ˆé‡‡ç”¨å¸¦æœ‰==Metadata==å­—æ ·çš„)
		-- ğŸ“GF1_PMS_E115.4_N35.8_20250426_L1A1228686752
			-- ğŸ“Bands
			  -- ...
			-- GF1_PMS_E115.4_N35.8_20250426_L1A1228686752_cloud.tif
			-- Metadata.xml
		...
## å››ã€æ³¨æ„äº‹é¡¹

 - æ–°å»º **ä¼ æ„Ÿå™¨** æ—¶ï¼Œæ³¨æ„åœ¨`sensor_table`é‡Œ`data_type` é‡Œè®¾ç½®ä¸€ä¸ªç±»å‹ï¼Œå†æ”¹ä¸€ä¸‹`band_config.json`; 
 - è°¨æ…æ·»åŠ æ–°çš„data_typeï¼Œç°æœ‰ç±»å‹ï¼š`satellite`ï¼Œ`dem`ï¼Œ`dsm`ï¼Œ`ndvi`ï¼Œ`svr`ï¼Œ`3d`;